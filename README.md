# Onchain Signal Platform

This monorepo contains the Onchain Signal platform, which consists of an AI agent for crypto trading signals and a frontend application to interact with the agent.

## Project Structure

- `apps/ai-agent`: The AI agent application that generates trading signals
- `apps/frontend`: The frontend application that displays trading signals and allows users to interact with the AI agent
- `packages/shared-types`: Shared TypeScript types used by both applications
- `packages/api-client`: API client for communicating with the AI agent

## Setup

1. Install dependencies:

```bash
pnpm install
```

2. Build the shared packages:

```bash
pnpm run build:shared
pnpm run build:api-client
```

## Running the Applications

### Development Mode

To run both the AI agent and frontend in development mode:

```bash
pnpm run dev:all
```

This will start:
- The AI agent (CryptoSentinel) on port 3003
- The frontend on port 3000

You can also run them separately:

```bash
# Run the AI agent
cd apps/ai-agent
PORT=3003 pnpm run dev

# Run the frontend (will start on port 3000)
cd apps/frontend
pnpm run dev
```

### Production Mode

To build the applications for production:

```bash
pnpm run build
```

To start the applications in production mode:

```bash
pnpm run start
```

## Features

### AI Trading Signals Dashboard

The frontend includes an AI Signals Panel that displays real-time trading signals from the CryptoSentinel AI agent. Each signal shows:

- **DateTime**: When the signal was generated
- **News Title & Description**: Trading reasoning and market analysis (truncated to 3 lines)
- **Ticker**: Cryptocurrency symbol (BTC, ETH, SOL, AVAX, etc.)
- **Signal Type**: BUY, SELL, or HOLD with color-coded badges
- **Confidence Level**: Percentage confidence in the signal
- **Target Price**: Expected price target (when available)
- **Clickable Links**: External links to view coin details on CoinMarketCap

The AI agent automatically generates signals based on:
- Technical indicators (RSI, MACD, Moving Averages)
- Fundamental analysis (Market Sentiment, News Analysis)
- Market conditions and volatility

### Real-time Updates

The system uses WebSocket connections to provide real-time updates of new trading signals as they are generated by the CryptoSentinel AI agent.

## API Endpoints

The AI agent exposes the following API endpoints:

- `GET /api/agents` - List all agents
- `POST /api/agents` - Create a new agent
- `GET /api/agents/:id` - Get agent details
- `PUT /api/agents/:id` - Update agent
- `DELETE /api/agents/:id` - Delete agent
- `PUT /api/agents/:id/status` - Update agent status
- `GET /api/signals` - Get trading signals
- `GET /api/executions` - Get trade executions
- `GET /api/risk/alerts` - Get risk alerts
- `GET /api/news` - Get market news

## WebSocket Events

The AI agent also provides real-time updates via WebSocket:

- `agent:status` - Agent status updates
- `agent:signal` - New trading signals
- `agent:execution` - Trade execution updates
- `risk:alert` - Risk alerts
- `market:news` - Market news updates

## Development Notes

- The AI agent uses a mock implementation in development mode to avoid dependencies on external services.
- The frontend connects to the AI agent via the API client, which is configured to use the correct port.
- The authentication system is currently mocked and will accept any credentials in development mode.

## Troubleshooting

### Port Configuration

The application uses the following ports:
- **Frontend**: http://localhost:3000 (Vite dev server)
- **AI Agent**: http://localhost:3003 (Express server)
- **WebSocket**: ws://localhost:3003 (Socket.IO)

The frontend uses Vite proxy configuration to route API calls:
- `/api/*` → `http://localhost:3003/api/*`
- `/socket.io/*` → `http://localhost:3003/socket.io/*` (WebSocket)

### Common Issues

1. **"No AI Signals" showing**: 
   - Ensure the AI agent is running on port 3003
   - Check browser console for network errors
   - Verify the Vite proxy is working by accessing http://localhost:3000/api/signals

2. **Network Errors**:
   - Make sure both frontend (port 3000) and AI agent (port 3003) are running
   - Check if any ad blockers or browser security is blocking requests
   - Restart both services with `pnpm run dev:all`

3. **WebSocket Connection Issues**:
   - WebSocket connects to the same origin as the frontend
   - Proxy configuration handles routing to the AI agent
   - Check browser network tab for WebSocket connection status
